# アプリ概要仕様書（spec）

## 1. アプリ概要
本アプリ「東急沿線一発判定（Tokyu Line Checker）」は、入力された住所に基づき、その場所が東急沿線エリアであるかを判定し、併せてその地域のライフライン（電気・水道・ガス）の事業者情報を提供するWebアプリケーションである。

## 2. 本アプリの目的
住所入力ひとつで「東急沿線かどうかの判定」と「引っ越し手続きに必要なライフライン連絡先」を即座に提示し、不動産業務や引っ越し準備に伴う調査作業を効率化することを目的とする。

## 3. 主な利用者
- 東急電気の獲得を行うアポインター
- 東急電気の獲得を行う営業マン

## 4. 主な機能（高レベル）
1. **住所判定・ジオコーディング**: 国土地理院APIを利用し、住所から緯度経度を特定する。
2. **最寄り駅検索**: HeartRails Express APIを利用し、緯度経度から最寄り駅と路線を特定する。
3. **東急沿線判定**: 取得した路線情報に基づき、東急線（田園都市線、東横線、目黒線など）が含まれるかを判定し、結果（判定OK/NG）とトークスクリプトを表示する。
4. **ライフライン情報提供**: 入力住所に基づき、電気（送配電）、水道（局・センター）、ガス（都市ガス事業者）の名称と連絡先電話番号を表示する。データはGoogleスプレッドシート（またはローカルCSV）から動的に取得・照合する。

## 5. システム構造
- **UI層**: `index.html`, `style.css` (ユーザー入力、結果表示、レスポンシブデザイン)
- **ロジック層**: `script.js` (API連携、CSVパース、判定ロジック、DOM操作)
- **データ層**: `utility_data.js` (フォールバック用CSVデータ), Google Sheets (ライブデータソース)
- **memory層**: 本フォルダ (仕様・ルール・履歴の管理)

## 6. 開発で守るべき原則
1. 既存ロジックを破壊しない
2. 既存のキー名・ID・データ構造を変更しない
3. 改修は最小差分で行う
4. 本番挙動に影響を与える変更は慎重に行う
5. 変更があれば必ず memory を更新する

## 7. 本仕様書の位置付け
本ファイルは、AIスタジオや外部開発者がこのアプリを改修する前に「最初に読むべき上位仕様書」として機能する。
